% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/GetFeatureExtractionReportByTimeWindows.R
\name{getFeatureExtractionReportByTimeWindows}
\alias{getFeatureExtractionReportByTimeWindows}
\title{Generate Feature Extraction Reports by Time Windows}
\usage{
getFeatureExtractionReportByTimeWindows(
  covariateData,
  startDays = NULL,
  endDays = NULL,
  includeNonTimeVarying = FALSE,
  minAverageValue = 0.01,
  includedCovariateIds = NULL,
  excludedCovariateIds = NULL,
  table1Specifications = NULL,
  cohortId,
  databaseId = NULL,
  cohortName = NULL,
  reportName = NULL,
  format = TRUE,
  distributionStatistic = c("averageValue", "standardDeviation", "medianValue",
    "p25Value", "p75Value"),
  pivot = TRUE
)
}
\arguments{
\item{covariateData}{A covariateData object containing feature extraction results with components:
\itemize{
  \item analysisRef (analysisId, analysisName, domainId, isBinary, missingMeansZero)
  \item covariateRef (covariateId, covariateName, analysisId, conceptId, valueAsConceptId, collisions)
  \item covariates (cohortDefinitionId, covariateId, timeId, sumValue, averageValue)
  \item covariatesContinuous (cohortDefinitionId, covariateId, countValue, minValue, maxValue,
        averageValue, standardDeviation, medianValue, p10Value, p25Value, p75Value, p90Value, timeId)
  \item timeRef (timeId, startDay, endDay)
}}

\item{startDays}{Vector of start days for time windows to include in the report. If NULL, all available
time windows from covariateData$timeRef will be used.}

\item{endDays}{Vector of end days for time windows to include in the report. If NULL, all available
time windows from covariateData$timeRef will be used.}

\item{includeNonTimeVarying}{Boolean indicating whether to include non-time-varying covariates.
Default is FALSE.}

\item{minAverageValue}{Minimum average value threshold for including covariates. Default is 0.01.}

\item{includedCovariateIds}{Vector of covariate IDs to include. If NULL, all covariates will be included
(subject to other filters).}

\item{excludedCovariateIds}{Vector of covariate IDs to exclude. If NULL, no covariates will be explicitly
excluded.}

\item{table1Specifications}{Optional data frame with specifications for formatting as a Table 1, containing
columns for label and covariateIds.}

\item{cohortId}{The cohort definition ID to generate the report for.}

\item{databaseId}{Optional database ID to include in the report header.}

\item{cohortName}{Optional cohort name to include in the report header.}

\item{reportName}{Optional report name to include in the report header.}

\item{format}{Boolean indicating whether to format the values in the report (e.g., as percentages).
Default is TRUE.}

\item{distributionStatistic}{Character vector of statistics to include for continuous variables.
Default includes "averageValue", "standardDeviation", "medianValue", "p25Value", "p75Value".}

\item{pivot}{Boolean indicating whether to pivot the report to have time periods as columns.
Default is TRUE.}
}
\value{
A list with two components:
  \itemize{
    \item raw: The raw data frame with all covariate information before formatting
    \item formatted: The formatted report, either in long format or pivoted (if pivot = TRUE)
  }
}
\description{
This function generates detailed reports from feature extraction data, analyzing covariates
across different time windows. It processes both binary and continuous covariates, and can
handle time-varying and non-time-varying features. The function supports filtering by
covariate IDs, formatting according to table specifications, and pivoting results for
easier interpretation.
}
\details{
The function processes both binary and continuous covariates from the provided covariateData object.
For binary covariates, it reports counts and percentages. For continuous covariates, it reports
the specified distribution statistics. The function can filter covariates based on minimum average
value and specific inclusion/exclusion lists.

Time windows are specified using startDays and endDays parameters. If these are NULL, all time
windows in the covariateData will be used. Non-time-varying covariates can be included by setting
includeNonTimeVarying to TRUE.

The table1Specifications parameter allows for organizing covariates into logical groups in the
report, similar to a Table 1 in clinical papers.
}
\examples{
\dontrun{
# Load covariate data
covariateData <- FeatureExtraction::loadCovariateData("path/to/covariateData")

# Generate report for specific time windows
report <- getFeatureExtractionReportByTimeWindows(
  covariateData = covariateData,
  startDays = c(-365, -30, 0),
  endDays = c(-1, -1, 0),
  includeNonTimeVarying = TRUE,
  cohortId = 1
)

# View the formatted report
View(report$formatted)
}

}
